
## Nova Pro
### 도어대시의 마이크로서비스 아키텍처 진화
* 도어대시는 초기에 단일 모놀리스 아키텍처를 사용했으나, 성장과 함께 마이크로서비스로 전환했다.
* 2013년 창업 당시 Django를 사용한 모놀리스 웹 앱으로 시작했으며, 2014년부터 스칼라를 사용한 첫 번째 마이크로서비스를 도입했다.
* 2017년부터 본격적으로 마이크로서비스로 전환을 시작했고, 2019년에는 Kotlin을 도입하여 표준화를 추진했다.

### 마이크로서비스 아키텍처의 이점과 도전
* 마이크로서비스는 독립적으로 배포 및 확장 가능한 작은 서비스로 구성되어 유연성과 확장성을 제공한다.
* 도어대시는 스트랭글러 패턴을 사용하여 점진적으로 마이크로서비스로 전환했다.
* 마이크로서비스 아키텍처의 도전 과제로는 서비스 경계 식별, 데이터 중복, 네트워크 지연, 모니터링 및 테스트 도구 부족 등이 있다.

### 하이퍼스케일과 도어대시의 성장
* 하이퍼스케일은 연간 성장률이 40% 이상인 급속한 성장을 의미한다.
* 도어대시는 하이퍼스케일 환경에서 약 150,000개의 요청을 처리하고, 약 1,000개의 서비스를 관리한다.
* 하이퍼스케일 환경에서의 주요 과제로는 테스트 부족, 블래스트 레이디어스, 복잡성 관리 등이 있다.

### 셀 기반 아키텍처 도입
* 도어대시는 프로젝트 슈퍼셀을 통해 셀 기반 아키텍처를 도입하여 실패 영향을 최소화하고 확장성을 높였다.
* 셀 기반 아키텍처는 독립적인 셀을 통해 실패 영향을 격리하고, 테스트 및 롤아웃을 용이하게 한다.
* 도어대시는 지리적 위치 및 시장 기반으로 셀을 분할하고, AWS 서비스를 활용하여 네트워킹 및 라우팅을 구현했다.

### 도어대시의 셀 기반 아키텍처 구현
* 도어대시는 글로벌 셀과 여러 슈퍼셀을 운영하며, 서비스를 점진적으로 슈퍼셀로 마이그레이션하고 있다.
* 셀 간의 네트워킹은 트랜짓 게이트웨이와 피어링을 활용하며, 라우팅은 컨설과 엔보이를 사용한다.
* 도어대시는 셀 기반 아키텍처를 통해 실패 영향을 최소화하고, 개발자의 신뢰를 높이며, 운영 시간을 단축했다.

### 주요 학습 사항과 고려 사항
* 셀 크기 결정 시 작은 셀이 더 작은 블래스트 레이디어스를 제공하며, 테스트 및 문제 해결이 용이하다.
* 셀 기반 아키텍처는 라우터가 단일 실패 지점이 될 수 있으므로, 고가용성 서비스를 활용해야 한다.
* 셀 마이그레이션은 복잡한 문제이지만, 실패 복구 시나리오에서는 유용할 수 있다.


## Cloaude 3.5 Sonnet v2
### DoorDash의 초기 아키텍처와 진화
* DoorDash는 2013년 설립 당시 Django 기반의 모놀리스 아키텍처로 시작했으며, 이는 단일 코드베이스와 단일 유닛으로 배포되는 시스템이었다.
* 2014년 첫 마이크로서비스인 Logistics AI 서비스를 도입했고, 2017년까지 여러 서비스들이 모놀리스 외부에서 운영되기 시작했다.
* 2018년에는 마이크로서비스 아키텍처로 전환을 시작했으나, 여전히 모놀리스가 중요 기능의 중심에 있었고 서비스간 강한 의존성 문제가 있었다.

### 하이퍼스케일의 도전과제
* DoorDash는 일평균 15만 건의 요청을 처리하며, 단일 HTTP 요청이 수천 개의 내부 요청으로 확장되는 복잡한 환경을 운영하고 있다.
* 하이퍼스케일 환경에서는 크로스 노드 잠금 조정, 배포 복잡성, 네트워크 지연, 클라우드 리소스 한계 등의 문제가 발생한다.
* 장애 발생 시 연쇄적인 실패나 타임아웃이 발생할 수 있으며, 이는 테스트하기 어렵고 전체 고객에게 영향을 미칠 수 있다.

### 셀 기반 아키텍처(Supercell) 구현
* DoorDash는 2020년부터 Project Supercell을 통해 셀 기반 아키텍처를 도입했다.
* 각 셀은 애플리케이션의 완전한 독립적인 인스턴스로, 장애 격리와 개발자 편의성을 고려해 설계되었다.
* 글로벌 셀과 4개의 슈퍼셀로 구성되며, 시장(market) 기반으로 트래픽을 분산하고 첫 번째 셀은 의도적으로 작게 유지하여 배포 영향을 최소화한다.

### 셀 기반 아키텍처의 이점과 과제
* 한 셀의 장애가 다른 셀에 영향을 미치지 않아 장애 영향 범위가 제한된다.
* 일관된 크기의 셀은 정기적으로 테스트되고 운영되어 장애 발생 가능성이 낮아진다.
* 현재는 공유 스토리지 모델을 사용하고 있어 이것이 단일 실패 지점이 될 수 있으며, 이는 2단계에서 데이터 샤딩을 통해 해결할 예정이다.

