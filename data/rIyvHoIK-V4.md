
## Nova Pro
### SaaS 스토리지 아키텍처의 주요 고려 사항
* 보안, 확장성, 효율성이 중요한 요소이다.
* 테넌트 온보딩 과정에서 배포 모델(silo, pool, bridge)에 따라 결정이 달라진다.
* 테넌트 간 데이터 격리를 위해 접근 패턴과 격리 컨텍스트를 적절히 설정해야 한다.

### 확장성 관리
* 수직 확장(더 많은 리소스 추가), 연결 관리, 수평 확장(더 많은 스토리지 인스턴스 추가)을 고려해야 한다.
* 쿼리 효율성 최적화와 물리적 디스크 효율성 개선을 통해 효율성을 높일 수 있다.
* 테이블 파티셔닝을 통해 특정 테넌트 데이터를 효율적으로 관리할 수 있다.

### 연결 관리
* 연결 관리를 위해 RDS 프록시와 RDS 데이터 API를 활용할 수 있다.
* 세션 변수를 사용할 때 RDS 프록시의 연결 고정 문제를 해결하기 위해 RDS 데이터 API를 사용할 수 있다.

### 수평 확장
* 읽기 복제본을 추가하여 읽기 작업을 분산할 수 있다.
* DynamoDB를 사용하면 스케일링, 연결 관리, 테이블 파티셔닝을 자동으로 처리할 수 있다.

### 샤딩
* 샤딩을 통해 데이터를 여러 샤드에 분산할 수 있다.
* Aurora Limitless Database를 사용하면 샤딩을 자동으로 관리할 수 있다.
* 샤딩 키를 설정하고, 테이블을 샤딩 모드로 생성하여 데이터를 분산할 수 있다.

### 백업 및 복원
* 백업은 디스크 레벨에서 수행되며, 공유 배포 모델에서는 모든 테넌트 데이터를 동시에 백업한다.
* 단일 테넌트 복원을 위해 백업 데이터에서 테넌트 데이터를 분리해야 할 수 있다.
* 백업 시 또는 복원 시 테넌트 데이터를 분리할 수 있으며, 각각의 장단점이 있다.

### 공정성
* 요금 제한 및 마이그레이션을 통해 공정성을 구현할 수 있다.
* API 게이트웨이를 사용하여 요청 수를 제한할 수 있다.
* 테넌트를 다른 스토리지 인스턴스로 이동하여 공정성을 유지할 수 있다.

### 데이터 모델 설계
* 테넌트 ID를 항목과 연결하고, 효율성을 중시하여 데이터 모델을 설계해야 한다.
* 공통 액세스 패턴에 따라 데이터를 중복하고, 보조 인덱스나 뷰를 사용하여 쿼리 효율성을 높일 수 있다.
* 업스트림 제한을 설정하여 스토리지 과부하를 방지할 수 있다.

### 주요 테이크어웨이
* SaaS는 확장성과 효율성을 중시해야 한다.
* 수직 확장, 연결 관리, 수평 확장을 적절히 활용해야 한다.
* 테넌트 데이터를 논리적 단위로 관리하고, 공정성을 유지해야 한다.


## Cloaude 3.5 Sonnet v2
### SaaS 데이터 스토리지의 기본 개념
* SaaS 애플리케이션은 웹 레이어, API 관리 레이어, 인증/인가 레이어, 애플리케이션 레이어, 데이터 레이어로 구성된다.
* SaaS 스토리지 아키텍처의 핵심 요소는 보안, 확장성, 효율성이다.
* 배포 모델은 Silo(테넌트별 전용 리소스), Pool(공유 리소스), Bridge(혼합) 모델로 구분된다.

### 데이터 액세스 패턴과 보안
* Silo 모델에서는 테넌트별 전용 Lambda와 IAM 인증을 사용할 수 있다.
* Pool 모델에서는 Secrets Manager를 통한 자격 증명 관리가 권장된다.
* Token Vending Machine을 통해 런타임에 테넌트별 범위가 지정된 자격 증명을 제공할 수 있다.

### 스토리지 확장성 관리
* 수직 확장, 연결 관리, 수평 확장의 세 가지 확장 메커니즘이 있다.
* RDS Proxy를 통해 연결 관리를 개선할 수 있다.
* Aurora 읽기 복제본을 통해 읽기 워크로드를 분산할 수 있다.
* Aurora Limitless Database를 통해 자동 샤딩을 구현할 수 있다.

### 백업과 공정성 관리
* 백업은 디스크 레벨에서 수행되며, 공유 모델에서는 테넌트별 복원이 복잡할 수 있다.
* 백업 분리는 백업 시점 또는 복원 시점에서 수행할 수 있다.
* API Gateway의 사용량 계획을 통해 상위 레벨에서 속도 제한을 구현할 수 있다.
* 테넌트 마이그레이션은 공정성 관리를 위한 중요한 도구이다.

### 데이터 모델 설계 고려사항
* 모든 항목에 테넌트 ID를 연결하여 소유권을 명확히 해야 한다.
* 효율성을 위해 데이터 배치와 중복을 고려해야 한다.
* 스토리지 공간보다 컴퓨팅이 주요 병목점이 될 수 있다.
* 상위 레벨의 제한을 미리 설정하여 스토리지 장애를 예방해야 한다.

