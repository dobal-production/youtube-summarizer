
## Nova Pro
### 셀 기반 아키텍처 소개
* 셀 기반 아키텍처는 클라우드 환경에서 글로벌 규모의 환경을 구축할 수 있게 해주는 아키텍처 패턴이다.
* 이 아키텍처는 플랫폼의 신뢰성을 높이고, 실패 발생 시 복원력을 강화하는 데 도움을 준다.

### Example Corporation 사례
* Example Corporation은 사무실 건물의 제어 시스템을 운영하는 가상의 회사로, 글로벌 고객에게 자원 활용과 근로자 편의를 개선하는 플랫폼을 제공한다.
* 이 플랫폼은 엘리베이터, 에어컨, 조명 등 다양한 센서와 장비로부터 데이터를 수집하고, 모니터링, 분석, 권장 사항, 경보 기능을 제공한다.
* 플랫폼은 마이크로서비스 아키텍처를 채택하고, Kubernetes 컨테이너, Amazon EKS, AWS App Mesh, Amazon DynamoDB, Amazon EventBridge, Amazon ElastiCache Redis 등 다양한 AWS 서비스를 사용한다.

### 장애 사례 분석
* 2023년 1월 2일, Example Corporation 플랫폼은 심각한 장애를 경험했다. 미국 동부 고객의 새로운 기능 활성화로 인해 발생한 인증 서비스의 문제가 원인이었다.
* 문제는 캐시 무효화 메커니즘의 결함으로 인해 악화되었고, "thundering herd problem"을 일으켜 백엔드 시스템에 과부하를 발생시켰다.
* 장애는 유럽 지역으로의 페일오버 후에도 반복되었으며, 패치 배포를 통해 해결되었다.

### 액티브/패시브 대 액티브/액티브 패턴
* Example Corporation은 기존에 액티브/패시브 패턴을 사용했으나, 페일오버 및 활성화 프로세스의 단점으로 인해 액티브/액티브 패턴으로 전환을 고려했다.
* 액티브/액티브 패턴은 두 지역에서 각각 50%의 고객을 서비스하여 페일오버 시간을 단축하고, 미사용 서버 용량을 줄일 수 있다.

### 포이즌 필 문제
* 고객 행동으로 인한 장애는 환경 페일오버로 해결할 수 없으며, 고객이 계속해서 동일한 문제를 유발할 수 있다.
* 이러한 반복 패턴은 "포이즌 필"이라고 불리며, 고객의 사용 패턴이 다른 고객에게 영향을 미치는 "노이지 네이버 문제"나 서비스 거부 공격 등이 포함된다.

### 셀 기반 아키텍처의 이점
* 셀 기반 아키텍처는 셀(cell)과 샤드(shard)를 사용하여 고객 데이터를 분리하고, 장애의 영향을 최소화한다.
* 셀은 전체 애플리케이션의 인스턴스와 데이터 저장소 샤드, 관련 비즈니스 로직을 포함한다.
* 셀 기반 아키텍처는 플랫폼의 신뢰성과 복원력을 향상시키고, 스케일링이 용이하며, 관리가 간편하다.

### 셀 기반 아키텍처의 구성 요소
* 배치 알고리즘: 셀의 구성과 고객 위치를 추적하고, 컨텍스트에 맞춘 배치를 지원한다.
* 라우터: 고객을 적절한 셀로 안내하고, 고객 요청을 라우팅한다.
* 복제 메커니즘: 고객 데이터를 다른 셀로 복제하여 고가용성을 보장한다.
* 마이그레이션 서비스: 고객 데이터를 한 셀 세트에서 다른 셀 세트로 투명하게 마이그레이션한다.
* 제어 평면: 셀 생성 및 구성, 다른 구성 요소 제어, 자동화된 작업을 관리한다.

### 추가 리소스
* Amazon Builder's Library와 Amazon Science에서 셀 기반 아키텍처와 관련된 추가 정보와 연구 결과를 확인할 수 있다.
* AWS Well-Architected Framework, AWS Architecture Center, AWS Solutions Library 등을 통해 클라우드 애플리케이션 설계에 도움을 받을 수 있다.


## Cloaude 3.5 Sonnet v2
### Example Corporation 소개 및 플랫폼 구성
* Example Corporation은 사무실 건물의 제어 시스템을 운영하는 회사로, 전 세계 고객들의 자원 활용과 근로자 편의를 개선하는 서비스를 제공한다.
* 플랫폼은 엘리베이터, 에어컨, 조명, 거울, 연기 감지기 등 다양한 센서와 장비로부터 데이터를 수집하여 모니터링, 분석, 권장사항, 경고 기능을 제공한다.
* 마이크로서비스 아키텍처를 기반으로 하며 EKS, App Mesh, DynamoDB, EventBridge, ElastiCache Redis 등 AWS 서비스를 활용한다.

### 시스템 장애 사례
* 2023년 1월 2일, 플랫폼에 치명적인 장애가 발생했다.
* 인증 서비스의 새로운 기능 활성화로 인해 미국과 유럽 사용자 간의 불일치가 발생했고, 캐시 무효화 메커니즘의 오류로 전체 캐시가 지워지는 문제가 발생했다.
* 이로 인해 백엔드 시스템에 대량의 요청이 발생하는 "thundering herd" 문제가 발생했고, 결과적으로 전체 플랫폼이 중단되었다.

### Cell-based 아키텍처의 특징과 장점
* Cell-based 아키텍처는 데이터를 여러 개의 독립적이고 균일한 저장소(셀)에 분산 저장하는 방식이다.
* Shuffled sharding 기술을 통해 고객 데이터를 무작위로 할당된 셀에 저장하여 장애의 영향 범위를 최소화한다.
* 각 셀은 독립적으로 운영되며, 한 셀의 장애가 다른 셀에 영향을 미치지 않도록 설계되어 있다.

### Cell-based 아키텍처의 주요 구성 요소
* 배치 알고리즘: 셀의 구성과 고객 위치를 추적하고 관리한다.
* 라우터: 고객이 적절한 셀에 접근할 수 있도록 투명하게 라우팅을 제공한다.
* 복제 엔진: 고가용성을 위해 데이터를 다른 셀에 복제한다.
* 마이그레이션 서비스: 고객 데이터를 한 셀에서 다른 셀로 투명하게 이동시킨다.
* 제어 평면: 셀의 생성과 구성을 제어하고 자동화하는 중앙 관리 시스템이다.

